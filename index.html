<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IceChocolate üç´</title>

<style>
:root{
  --bg:#f6e8c3;
  --card:#fff;
  --text:#000;
  --main:#3b1f0f;
}
body.dark{
  --bg:#121212;
  --card:#1e1e1e;
  --text:#fff;
}

body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:var(--bg);
  color:var(--text);
  transition:.3s;
}

header{
  background:var(--main);
  color:#fff;
  padding:15px;
  display:flex;
  justify-content:space-between;
}

nav{
  background:#fff;
  padding:8px;
}
nav button{
  margin:4px;
  padding:8px 12px;
  border:none;
  border-radius:6px;
}

.page{display:none;padding:20px;animation:fade .4s}
.page.active{display:block}

.hero{
  display:flex;
  flex-wrap:wrap;
  gap:20px;
  align-items:center;
}
.hero img{
  max-width:300px;
  border-radius:15px;
}

.card{
  background:var(--card);
  padding:15px;
  margin:10px;
  border-radius:12px;
  box-shadow:0 5px 15px rgba(0,0,0,.2);
  transition:.3s;
}
.card:hover{transform:scale(1.03)}

.grid{display:flex;flex-wrap:wrap}

button.primary{
  background:var(--main);
  color:#fff;
  border:none;
  padding:8px 14px;
  border-radius:6px;
}

footer{
  position:fixed;
  bottom:0;
  width:100%;
  background:#fff;
  padding:10px;
  box-shadow:0 -3px 10px rgba(0,0,0,.2);
}

#paymentModal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
}
.modal{
  background:#fff;
  padding:20px;
  border-radius:10px;
  width:90%;
  max-width:350px;
  margin:100px auto;
}

@keyframes fade{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1}
}
</style>
</head>

<body>

<header>
  <b>IceChocolate</b>
  <div id="userBox">
    <button onclick="login()" class="primary">Login</button>
  </div>
</header>

<nav>
  <button onclick="show('home')">Home</button>
  <button onclick="show('shop')">Shop</button>
  <button onclick="show('about')">About</button>
  <button onclick="show('orders')">Orders</button>
  <button onclick="show('account')">My Account</button>
</nav>

<!-- HOME -->
<div id="home" class="page active">
  <div class="hero">
    <div>
      <h2>Healthy Ice Creams üç¶</h2>
      <p>Protein-rich ‚Ä¢ Low sugar ‚Ä¢ Made for fitness lovers</p>
      <p>Enjoy guilt-free ice creams and chocolates with demo payments.</p>
      <button class="primary" onclick="show('shop')">Shop Now</button>
    </div>
    <img src="https://images.unsplash.com/photo-1497034825429-c343d7c6a68f" alt="Ice Cream">
  </div>
</div>

<!-- SHOP -->
<div id="shop" class="page">
  <input placeholder="Search..." oninput="search(this.value)" style="padding:8px;width:100%">
  <div class="grid" id="shopList">

    <div class="card item">
      <img src="https://images.unsplash.com/photo-1589712235274-4c1c7a7d5b3d" width="100%">
      <h3>Protein Ice Cream</h3>
      <p>‚Çπ120</p>
      <button onclick="add('Protein Ice Cream',120)" class="primary">Add</button>
    </div>

    <div class="card item">
      <img src="https://images.unsplash.com/photo-1606313564200-e75d5e30476c" width="100%">
      <h3>Healthy Chocolate</h3>
      <p>‚Çπ90</p>
      <button onclick="add('Healthy Chocolate',90)" class="primary">Add</button>
    </div>

  </div>
</div>

<!-- ABOUT -->
<div id="about" class="page">
  <h2>About IceChocolate üç´</h2>
  <p>
    IceChocolate was created with one goal ‚Äî to make desserts healthy and tasty.
    We use high-quality ingredients, less sugar, and more protein.
  </p>

  <div class="grid">
    <div class="card">
      <h3>üå± Natural Ingredients</h3>
      <p>No artificial flavors, no shortcuts.</p>
    </div>
    <div class="card">
      <h3>üí™ Fitness Friendly</h3>
      <p>Perfect for gym lovers & health conscious people.</p>
    </div>
    <div class="card">
      <h3>üöÄ Fast Delivery</h3>
      <p>Fresh products delivered quickly.</p>
    </div>
  </div>
</div>

<!-- ORDERS -->
<div id="orders" class="page">
  <h2>Your Orders</h2>
  <ul id="orderList"></ul>
</div>

<!-- ACCOUNT -->
<div id="account" class="page">
  <h2>My Account</h2>
  <input type="file" onchange="preview(event)">
  <br><img id="avatar" width="80"><br><br>

  <label>
    Dark Mode
    <input type="checkbox" onchange="toggleDark(this)">
  </label>
</div>

<footer>
  <span id="cartText">Cart empty</span>
  <button onclick="openPay()" class="primary" style="float:right">Checkout</button>
</footer>

<!-- PAYMENT -->
<div id="paymentModal">
  <div class="modal">
    <h3>Demo Payment</h3>
    <p>Total ‚Çπ<span id="payAmount">0</span></p>

    <input id="upi" placeholder="example@upi" style="width:100%;padding:8px"><br><br>
    <input id="card" placeholder="Card Number" style="width:100%;padding:8px"><br><br>

    <button onclick="confirmPay()" class="primary">Pay</button>
    <button onclick="closePay()">Cancel</button>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAm-QUwp0pr0997PdvhMwcDJapL8sGXyWc",
  authDomain: "cafw-32f1d.firebaseapp.com",
  projectId: "cafw-32f1d",
  appId: "1:92588625120:web:9cb0570bd2dc3622039485"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
const provider = new GoogleAuthProvider();

let user=null,cart=[];

window.login=()=>signInWithPopup(auth,provider);
window.logout=()=>signOut(auth);

onAuthStateChanged(auth,u=>{
  if(u){
    user=u;
    userBox.innerHTML=`${u.email} <button onclick="logout()">Logout</button>`;
  }
});

window.add=(n,p)=>{
  cart.push({n,p});
  cartText.innerText=cart.length+" items";
};

window.openPay=()=>{
  if(cart.length==0)return alert("Cart empty");
  payAmount.innerText=cart.reduce((a,b)=>a+b.p,0);
  paymentModal.style.display="block";
};
window.closePay=()=>paymentModal.style.display="none";

window.confirmPay=async ()=>{
  if(!user)return alert("Login first");
  if(!upi.value && !card.value)return alert("Enter payment details");

  await addDoc(collection(db,"orders"),{
    uid:user.uid,
    items:cart,
    status:"Paid (Demo)",
    time:serverTimestamp()
  });

  alert("Payment successful üéâ");
  cart=[];
  cartText.innerText="Cart empty";
  closePay();
};

window.show=id=>{
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
};

window.search=v=>{
  document.querySelectorAll(".item").forEach(i=>{
    i.style.display=i.innerText.toLowerCase().includes(v.toLowerCase())?"block":"none";
  });
};

window.preview=e=>{
  avatar.src=URL.createObjectURL(e.target.files[0]);
};

window.toggleDark=e=>{
  document.body.classList.toggle("dark",e.checked);
};
</script>

</body>
</html>
